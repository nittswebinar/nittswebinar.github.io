nittsUI.directive("payment",["Session","api","$uibModal",function(e,n,t){return{restrict:"A",link:function(i,r,a){var o=a.amount||29,u=a.membership||"premium",c=StripeCheckout.configure({key:"pk_live_L0hv8z2NpOM5cT1CCoYMVI1l",image:"/assets/img/800x800-logo.png",name:"NITTS Webinar",description:"Abonnement Premium",panelLabel:"Souscrire pour {{amount}}",allowRememberMe:!1,locale:"auto",currency:"eur",token:function(i){mixpanel.track("Credit Card data validated for"+u),e.isAuthenticated()?n.create("user/upgrade",{stripeToken:i.id,amount:o,plan:u},function(e){}):t.open({templateUrl:TEMPLATE_ELEMENTS_URL+"/passwordSet.html",backdrop:"static",keyboard:!1,controller:["$scope",function(e){e.credentials={}}]}).result.then(function(t){e.register({email:i.email,password:t.password},function(e){n.create("user/upgrade",{stripeToken:i.id,amount:o,plan:u},function(e){})})})}});r.bind("click",function(){c.open({amount:100*o})})}}}]);